function checkScript(){setPage(modernTheme)}function setPage(e){if("central"!==defaultPage){var i;switch(defaultPage){case"selfservice":i="self-service";break;case"community":i="community";break;case"coop":i="experiential learning/co-op";break;case"career":i="career development";break;case"info":i="infochannels";break;default:i=null}$("#tabs_tda td").each(function(){var e=$(this).find("a"),a=window.location.origin+"/"+e.attr("href"),t=a===window.location.href;console.log(t,e),e.text().toLowerCase()!==i||t||(window.location.href=a)})}e()}function modernTheme(){function e(e){return e.replace(/<\/tbody>/g,"</div>").replace(/<br>/g,"").replace(/<tr>/g,"<ul>").replace(/<\/tr>/g,"</ul>").replace(/<td>/g,"<li>").replace(/<\/td>/g,"</li>").replace(/<tr/g,"<ul").replace(/<td/g,"<li")}function i(){var e=$(".heading");e.height()<e.children().height()?$(".secondary").each(function(){$(this).addClass("sreduce"),$(window).width()>r&&(r=$(window).width()),$(this).html().indexOf("Signed")!==-1&&$(this).css("display","none")}):$(window).width()>r&&$(".secondary").each(function(){$(this).removeClass("sreduce"),$(this).html().indexOf("Signed")!==-1&&$(this).css("display","block")})}function a(){var e=$(".nav").offset().top,i=$(".nav").height(),a=$(".credits").offset().top;e+i+40>=a?$(".credits").css("opacity",0):$(".credits").css("opacity",.2)}function t(e,i){i.click(function(i){i.stopPropagation();var a=$(e).parent(".select");a.toggleClass("active"),$(".select").not(a).removeClass("active")})}function s(){var e="This layout table is used to present the schedule course detail";$('.datadisplaytable[summary="'+e+'"]').each(function(){$(this).css("display","none");var e=$(this).find("tbody").children(),i=e.eq(0).children("td").html(),a=e.eq(1).children("td").html(),t=e.eq(2).children("td").html(),s=e.eq(4).children("td").html(),d=e.eq(5).children("td").html(),r=e.eq(6).children("td").html(),c=e.eq(7).children("td").html(),h=$(this).next()[0];$(h).css("display","none");var o=$(h).find("tbody").children().eq(1).children(),p=o.eq(1).html(),g=o.eq(2).html(),u=o.eq(3).html(),f=o.eq(4).html(),m=o.eq(6).html(),v=o.eq(7).html(),b='<div class="schedule-item">';b+='<div class="building-image" style="background-image: url('+chrome.extension.getURL(n(u))+')">';var x=$(this).find("caption").html(),y=x.match(/- ([A-Z]{2,4} \d{4}) -/)[1],w=x.match(/^.*?(?= -)/g);b+='<div class="building-left"><h3>'+y+"</h3><h1>"+w+"</h1></div>";for(var k=0,O="";k<=g.length;){switch(g.slice(k,k+1)){case"M":O+="Mon, ";break;case"T":O+="Tue, ";break;case"W":O+="Wed, ";break;case"R":O+="Thur, ";break;case"F":O+="Fri, ";break;case"S":O+="Sat, ";break;default:O+=""}k++}O.length>0&&(O=O.slice(0,O.length-2));var j,C,S=$(h).find("tbody").children().eq(2);if(S.length){var L=S.children().eq(1).html(),q=S.children().eq(4).html();j=S.children().eq(3).html(),C='<span class="finals">Final on '+q.match(/^.*?(?= -)/g)+" at<br>"+L+"</span>"}else C="No Final",j="No Final";m=m.split(", ");var M;if(m.length>1){for(var P=1,T="";P<m.length;)T+="<span>"+l(m[P])+"</span>",P++;M=l(m[0])+', <div class="hiddenprof">+'+(m.length-1)+'<div class="otherprof">'+T+"</div></div>"}else M=l(m[0]);b+='<div class="building-right"><h3>'+O+'</h3><h3><i class="fa fa-clock-o" aria-hidden="true"></i> '+p+"</h3></div>",b+="</div>",b+='<div class="schedule-details">',b+='<div class="details-left"><span><i class="fa fa-map-marker" aria-hidden="true"></i> '+u+'</span><span><i class="fa fa-user" aria-hidden="true"></i> '+M+"</span></div>",b+='<div class="details-center"><span><i class="fa fa-dot-circle-o" aria-hidden="true"></i> '+d+' Credits</span><span><i class="fa fa-calendar" aria-hidden="true"></i> '+C+"</span></div>",b+='<div class="details-right"><span><i>CRN:</i> '+a+'</span><span><a class="more-details">more...</a></span></div>',b+="</div>",b+='<div class="schedule-extras"><div class="extras-left">',b+="<p>Range <span>"+f+"</span></p>",b+="<p>Term <span>"+i+"</span></p>",b+="<p>Campus <span>"+c+"</span></p>",b+="<p>Status <span>"+t+"</span></p>",b+='</div><div class="extras-right">',b+="<p>Final Location <span>"+j+"</span></p>",b+="<p>Grade Mode <span>"+s+"</span></p>",b+="<p>Level <span>"+r+"</span></p>",b+="<p>Remaining Seats <span>"+v+"</span></p>",b+="</div></div></div>",$(this).after(b)})}function n(e){return e.indexOf("Behrakis")!==-1?"img/buildings/behrakis.jpg":e.indexOf("West Village H")!==-1?"img/buildings/wvh.jpg":e.indexOf("West Village G")!==-1?"img/buildings/wvg.jpg":e.indexOf("West Village F")!==-1?"img/buildings/wvf.jpg":e.indexOf("International Village")!==-1?"img/buildings/iv.jpg":e.indexOf("Ryder")!==-1?"img/buildings/ryder.jpg":e.indexOf("Forsyth")!==-1?"img/buildings/forsyth.jpg":e.indexOf("Richards")!==-1?"img/buildings/richards.jpg":e.indexOf("Ell")!==-1?"img/buildings/ell.jpg":e.indexOf("Dodge")!==-1?"img/buildings/dodge.jpg":e.indexOf("Hayden")!==-1?"img/buildings/hayden.jpg":e.indexOf("Hurtig")!==-1?"img/buildings/hurtig.jpg":e.indexOf("Mugar")!==-1?"img/buildings/mugar.jpg":e.indexOf("Robinson")!==-1?"img/buildings/robinson.jpg":e.indexOf("Snell Library")!==-1?"img/buildings/library.jpg":e.indexOf("Lake")!==-1?"img/buildings/lake.jpg":e.indexOf("Kariotis")!==-1?"img/buildings/kariotis.jpg":"img/buildings/campus.jpg"}function l(e){var i=e.match(/<a href(.|\s)*?>/);return i?i[0]+e.match(/(.*?)<a href/)[1]+"</a>":e}var d=["bg1.jpg","bg2.jpg","bg3.jpg","bg4.jpg","bg5.jpg","bg6.jpg","bg7.jpg","bg8.jpg","bg9.jpg","bg10.jpg","bg11.jpg","bg12.jpg","bg13.jpg","bg14.jpg","bg15.jpg","bg16.jpg","bg17.jpg","bg18.jpg","bg19.jpg","bg20.jpg"];window.location.pathname.indexOf("logout")!==-1&&(window.location.pathname="/"),"/cp/home/displaylogin"===window.location.pathname&&($("body").addClass("login"),$("body").css("background-image","url("+chrome.extension.getURL("img/portalbg/"+d[Math.floor(Math.random()*d.length)])+")"),$("#wrap").append('<div class="new-login"><form><img src="'+chrome.extension.getURL("img/myNEU.png")+'"><br><input name="neu-user" placeholder="Username" type="text"><br><input name="neu-pass" placeholder="Password" type="password"><br><button onclick="javascript:login();return true;" onload="clearCache()">Log in</button></form></div>'),$(".helplinks li").each(function(){$(this).html().indexOf("password.html")!==-1&&$(".new-login form").append($(this))}),$("input[name=neu-user]").focus(),$(".new-login").on("change",function(){var e=$("input[name=neu-user]").val(),i=$("input[name=neu-pass]").val();$("input[name=user]").val(e),$("input[name=pass]").val(i)}),$(".new-login").on("click",function(e){e.preventDefault()}),$(".new-login form button").on("click",function(e){$(this).html('<div class="spinner"><div class="rect1"></div>&nbsp;<div class="rect2"></div>&nbsp;<div class="rect3"></div>&nbsp;<div class="rect4"></div>&nbsp;<div class="rect5"></div></div>')}),$("#wrap").append('<div class="footer-links">'+$(".footerlinks").html()+"</div>")),$("#tabs_tda").each(function(){var i=$(this).html().replace(/<tbody>/g,"<div>"),a=e(i);$(this).html('<div class="nav">'+a+'</div><div class="credits">Made with <i class="fa fa-heart" aria-hidden="true"></i> by <a href="https://github.com/Abbondanzo/Modern-MyNEU">Peter Abbondanzo</a></div>')}),$(".bg1").closest("table").html('<div class="mylogo"><img src="'+chrome.extension.getURL("img/logo.png")+'"></div>'),$("#welcome").closest("table").each(function(){var i=$(this).html().replace(/<tbody>/g,"<div>").replace(/Welcome/g,"Signed in as").replace(/You are currently logged in./g,"").replace(/&nbsp;/g,""),a=e(i);$(this).html('<div class="heading">'+a+"</div>"),$(this).css("height","84px")}),$(".uportal-label").each(function(){$(this).html().indexOf("logout")!==-1?$(this).addClass("logout"):$(this).addClass("secondary")}),$("#welcome").parent().addClass("user"),$(".uportal-label").each(function(){var e=$(this).html();switch(e){case"mail":$(this).html('<i class="fa fa-envelope" aria-hidden="true"></i> '+e);break;case"my profile":$(this).html('<i class="fa fa-cog" aria-hidden="true"></i> '+e);break;case"NUPay":$(this).html('<i class="fa fa-shopping-basket" aria-hidden="true"></i> '+e);break;case"help":$(this).html('<i class="fa fa-question-circle" aria-hidden="true"></i> '+e),$(this).closest("ul").append('<li class="search"><input type="type" id="searchQuery" placeholder="Search"></input></li>');break;case"logout":$(this).html(e+' <i class="fa fa-sign-out" aria-hidden="true"></i>')}}),$(".nav div ul li").each(function(){var e=$(this).children().children().html();e.indexOf("myNEU Central")!==-1?$(this).children().children().html('<i class="fa fa-home" aria-hidden="true"></i> '+e):e.indexOf("Self-Service")!==-1?$(this).children().children().html('<i class="fa fa-navicon" aria-hidden="true"></i> '+e):e.indexOf("Community")!==-1?$(this).children().children().html('<i class="fa fa-users" aria-hidden="true"></i> '+e):e.indexOf("Experiential Learning/Co-op")!==-1?$(this).children().children().html('<i class="fa fa-graduation-cap" aria-hidden="true"></i> '+e):e.indexOf("Career Development")!==-1?$(this).children().children().html('<i class="fa fa-briefcase" aria-hidden="true"></i> '+e):e.indexOf("InfoChannels")!==-1?$(this).children().children().html('<i class="fa fa-info-circle" aria-hidden="true"></i> '+e):$(this).children().children().html('<i class="fa fa-file-text" aria-hidden="true"></i> '+e)}),$(".border img").each(function(){var e=$(this).attr("title"),i=$(this).attr("src");e?e.indexOf("Expand")!==-1?$(this).parent().html('<i title="'+e+'" class="fa fa-expand" aria-hidden="true"></i>'):e.indexOf("Maximize")!==-1?$(this).parent().html('<i title="'+e+'" class="fa fa-caret-square-o-right" aria-hidden="true"></i>'):e.indexOf("Minimize")!==-1&&$(this).parent().html('<i title="'+e+'" class="fa fa-caret-square-o-down" aria-hidden="true"></i>'):i.indexOf("chan_remove_na")!==-1&&$(this).css("display","none")}),$("#searchQuery").on("keypress change keydown paste input",function(){var e=$(this).val().toLowerCase();$(".uportal-background-content td table").each(function(){var i=$(this).html().toLowerCase().replace(/<style(.|\s)*?style>/g,"").replace(/<script(.|\s)*?script>/g,"").replace(/<.*?>/g,"");i.indexOf(e)!==-1?$(this).css("display","table"):$(this).css("display","none")})});var r=1275;if(window.location.pathname.indexOf("render")!==-1){var c;$(window).on("resize",function(){clearTimeout(c),c=setTimeout(function(){a(),i()},50)}),$(document).ready(function(e){setTimeout(function(){a(),i()},50)})}$(".headerlinksdiv2 form").each(function(){var e=$(this).html();e.indexOf("Search")!==-1&&($(this).html(e.slice(7,-1)),$("input[type=text]").attr("placeholder","Search"))});var h=window.location.pathname;if(h.indexOf("udcprod8")!==-1){var o=$(".pagetitlediv").find("h2").html();$(".pagebodydiv").prepend("<h2>"+o+"</h2>"),$(".submenulinktext2").each(function(){var e=$(this).html();e.indexOf("RETURN TO MENU")!==-1?$(this).html('<i title="Return to Menu" class="fa fa-reply" aria-hidden="true"></i><span>'+e+"</span>"):e.indexOf("SITE MAP")!==-1?$(this).html('<i title="Site Map" class="fa fa-list" aria-hidden="true"></i><span>'+e+"</span>"):e.indexOf("HELP")!==-1&&$(this).html('<i title="Help" class="fa fa-life-ring" aria-hidden="true"></i><span>'+e+"</span>")}),"Student Detail Schedule"===o&&(s(),$(".more-details").on("click",function(){var e=$(this).closest(".schedule-item");e.hasClass("active-schedule")?(e.removeClass("active-schedule"),$(this).html("more...")):(e.addClass("active-schedule"),$(this).html("less..."))})),h.indexOf("NEUCLSS")!==-1&&($("body").css("background-image","none"),$(".pageheaderdiv1").css("margin-top",0)),h.indexOf("P_Regs")===-1&&h.indexOf("bwskfreg.P_AltPin")===-1||$(".datadisplaytable").each(function(){$(this).addClass("resize-table")})}$(".ddlabel").each(function(){var e=$(this).html();e.indexOf("TransferFrom")!==-1?($(this).attr("colspan","3"),$(this).next().css("border",0),$(this).next().attr("colspan","9")):e.indexOf("Academic Standing")!==-1&&$(this).next().css("border",0)}),$("select:not([multiple])").each(function(){var e=this;$(e).wrap('<div class="select"></div>');var i=e.options,a=$('<div class="current">'+i[i.selectedIndex].innerHTML.trim()+"</div>");$(e).before(a);for(var s='<div class="options">',n=0;n<i.length;n++)s+='<div class="option" data-value="'+i[n].value+'">'+i[n].innerHTML.trim()+"</div>";var l=$(s+"</div>");$(e).after(l),t(e,a),l.find(".option").click(function(i){i.stopPropagation(),a.html(this.innerHTML),e.value=$(this).data("value"),$(e).parent(".select").removeClass("active")})}),$("select[multiple]").each(function(){var e=this;$(e).wrap('<div class="select" style="width: 300px;"></div>');var i=e.options,a=$('<div class="current">'+i[0].innerHTML.trim()+"</div>");$(e).before(a);for(var s='<div class="options" style="width: 300px;">',n=$('<input type="text" placeholder="Search... (Coming soon!)" class="search" disabled>'),l=0;l<i.length;l++)s+='<div class="option'+(i[l].selected?" selected":"")+'" data-value="'+i[l].value+'">'+i[l].innerHTML.trim()+"</div>";var d=$(s+"</div>");d.prepend(n),$(e).after(d),t(e,a),n.click(function(e){e.stopPropagation()}),d.find(".option").click(function(i){i.stopPropagation();var t=$(e).val();t||(t=[]);var s=$(this).data("value").toString();if($(this).hasClass("selected"))t.splice(t.indexOf(s),1);else if("%"===s)d.find(".option.selected").removeClass("selected"),t=["%"];else{var n=t.indexOf("%");n!==-1&&(d.find('[data-value="%"].selected').removeClass("selected"),t.splice(n,1)),t.push(s)}switch($(this).toggleClass("selected"),$(e).val(t),t.length){case 0:a.html("Select an item");break;case 1:a.html(d.find('[data-value="'+t[0]+'"]').html());break;default:a.html(t.length+" items selected")}})}),$(document).click(function(){$(".select").removeClass("active")})}var style=document.createElement("link");style.rel="stylesheet",style.type="text/css",style.id="customcss",style.href=chrome.extension.getURL("themes/modern/custom.css");var defaultPage;chrome.storage.sync.get({enabled:"true",customColor:"ea1f23",defaultPage:"central"},function(e){JSON.parse(e.enabled)?(defaultPage=e.defaultPage,(document.head||document.documentElement).appendChild(style),checkScript()):($('link[href*="custom.css"]').remove(),style.href=chrome.extension.getURL("css/default.css"),(document.head||document.documentElement).appendChild(style))});