function checkScript(){var e="Thank you for using Modern MyNEU. If you experience any issues or would like to dig into the code, head on over to https://github.com/Abbondanzo/Modern-MyNEU.";console.info(e),checkPage(modernTheme)}function createCookie(e,i,a){var t="";if(a){var s=new Date;s.setTime(s.getTime()+60*a*60*1e3),t="; expires="+s.toUTCString()}document.cookie=e+"="+i+t+"; path=/"}function readCookie(e){for(var i=e+"=",a=document.cookie.split(";"),t=0;t<a.length;t++){for(var s=a[t];" "==s.charAt(0);)s=s.substring(1,s.length);if(0==s.indexOf(i))return s.substring(i.length,s.length)}return null}function eraseCookie(e){createCookie(e,"",-1)}function checkPage(e){var i=readCookie("JSESSIONID"),a=window.location.href.indexOf("cp/home/displaylogin")!==-1,t=readCookie("singlePageRedirect");!i||a?createCookie("singlePageRedirect",!1,1):JSON.parse(t)||setPage(),e()}function setPage(){var e=document.querySelector("html");if(e.style.opacity=0,"central"!==defaultPage){var i;switch(defaultPage){case"selfservice":i="self-service";break;case"community":i="community";break;case"coop":i="experiential learning/co-op";break;case"career":i="career development";break;case"info":i="infochannels";break;default:i=null}$("#tabs_tda td").each(function(){var e=$(this).find("a"),a=window.location.origin+"/"+e.attr("href"),t=a===window.location.href;e.text().toLowerCase()!==i||t||(createCookie("singlePageRedirect",!0,1),window.location.href=a)})}else createCookie("singlePageRedirect",!0,1);setTimeout(function(){e.style.opacity=1},2e3)}function modernTheme(){function e(e){return e.replace(/<\/tbody>/g,"</div>").replace(/<br>/g,"").replace(/<tr>/g,"<ul>").replace(/<\/tr>/g,"</ul>").replace(/<td>/g,"<li>").replace(/<\/td>/g,"</li>").replace(/<tr/g,"<ul").replace(/<td/g,"<li")}function i(){var e=$(".heading");e.height()<e.children().height()?$(".secondary").each(function(){$(this).addClass("sreduce"),$(window).width()>c&&(c=$(window).width())}):$(window).width()>c&&$(".secondary").each(function(){$(this).removeClass("sreduce")})}function a(){var e=$(".nav").offset().top,i=$(".nav").height(),a=$(".credits").offset().top;e+i+40>=a?$(".credits").css("opacity",0):$(".credits").css("opacity",.2)}function t(e,i){i.click(function(i){i.stopPropagation();var a=$(e).parent(".select");a.toggleClass("active"),$(".select").not(a).removeClass("active")})}function s(){var e="This layout table is used to present the schedule course detail";$('.datadisplaytable[summary="'+e+'"]').each(function(){$(this).css("display","none");var e=$(this).find("tbody").children(),i=e.eq(0).children("td").html(),a=e.eq(1).children("td").html(),t=e.eq(2).children("td").html(),s=e.eq(4).children("td").html(),r=e.eq(5).children("td").html(),c=e.eq(6).children("td").html(),d=e.eq(7).children("td").html(),o=$(this).next()[0];$(o).css("display","none");var h=$(o).find("tbody").children().eq(1).children(),p=h.eq(1).html(),g=h.eq(2).html(),u=h.eq(3).html(),f=h.eq(4).html(),m=h.eq(6).html(),v=h.eq(7).html(),b='<div class="schedule-item">';b+='<div class="building-image" style="background-image: url('+chrome.extension.getURL(n(u))+')">';var y=$(this).find("caption").html(),k=y.match(/- ([A-Z]{2,4} \d{4}) -/)[1],w=y.match(/^.*?(?= -)/g);b+='<div class="building-left"><h3>'+k+"</h3><h1>"+w+"</h1></div>";for(var x=0,C="";x<=g.length;){switch(g.slice(x,x+1)){case"M":C+="Mon, ";break;case"T":C+="Tue, ";break;case"W":C+="Wed, ";break;case"R":C+="Thur, ";break;case"F":C+="Fri, ";break;case"S":C+="Sat, ";break;default:C+=""}x++}C.length>0&&(C=C.slice(0,C.length-2));var j,S,O=$(o).find("tbody").children().eq(2);if(O.length){var P=O.children().eq(1).html(),M=O.children().eq(4).html();j=O.children().eq(3).html(),S='<span class="finals">Final on '+M.match(/^.*?(?= -)/g)+" at<br>"+P+"</span>"}else S="No Final",j="No Final";m=m.split(", ");var T;if(m.length>1){for(var q=1,L="";q<m.length;)L+="<span>"+l(m[q])+"</span>",q++;T=l(m[0])+', <div class="hiddenprof">+'+(m.length-1)+'<div class="otherprof">'+L+"</div></div>"}else T=l(m[0]);b+='<div class="building-right"><h3>'+C+'</h3><h3><i class="fa fa-clock-o" aria-hidden="true"></i> '+p+"</h3></div>",b+="</div>",b+='<div class="schedule-details">',b+='<div class="details-left"><span><i class="fa fa-map-marker" aria-hidden="true"></i> '+u+'</span><span><i class="fa fa-user" aria-hidden="true"></i> '+T+"</span></div>",b+='<div class="details-center"><span><i class="fa fa-dot-circle-o" aria-hidden="true"></i> '+r+' Credits</span><span><i class="fa fa-calendar" aria-hidden="true"></i> '+S+"</span></div>",b+='<div class="details-right"><span><i>CRN:</i> '+a+'</span><span><a class="more-details">more...</a></span></div>',b+="</div>",b+='<div class="schedule-extras"><div class="extras-left">',b+="<p>Range <span>"+f+"</span></p>",b+="<p>Term <span>"+i+"</span></p>",b+="<p>Campus <span>"+d+"</span></p>",b+="<p>Status <span>"+t+"</span></p>",b+='</div><div class="extras-right">',b+="<p>Final Location <span>"+j+"</span></p>",b+="<p>Grade Mode <span>"+s+"</span></p>",b+="<p>Level <span>"+c+"</span></p>",b+="<p>Remaining Seats <span>"+v+"</span></p>",b+="</div></div></div>",$(this).after(b)})}function n(e){var i={Behrakis:"img/buildings/behrakis.jpg","West Village H":"img/buildings/wvh.jpg","West Village G":"img/buildings/wvg.jpg","West Village F":"img/buildings/wvf.jpg","International Village":"img/buildings/iv.jpg",Ryder:"img/buildings/ryder.jpg",Forsyth:"img/buildings/forsyth.jpg",Richards:"img/buildings/richards.jpg",Ell:"img/buildings/ell.jpg",Dodge:"img/buildings/dodge.jpg",Hayden:"img/buildings/hayden.jpg",Hurtig:"img/buildings/hurtig.jpg",Mugar:"img/buildings/mugar.jpg",Robinson:"img/buildings/robinson.jpg","Snell Library":"img/buildings/library.jpg",Lake:"img/buildings/lake.jpg",Kariotis:"img/buildings/kariotis.jpg"};for(var a in i)if(e.indexOf(a)!==-1)return i[a];return"img/buildings/campus.jpg"}function l(e){var i=e.match(/<a href(.|\s)*?>/);return i?i[0]+e.match(/(.*?)<a href/)[1]+"</a>":e}var r=["bg1.jpg","bg2.jpg","bg3.jpg","bg4.jpg","bg5.jpg","bg6.jpg","bg7.jpg","bg8.jpg","bg9.jpg","bg10.jpg","bg11.jpg","bg12.jpg","bg13.jpg","bg14.jpg","bg15.jpg","bg16.jpg","bg17.jpg","bg18.jpg","bg19.jpg","bg20.jpg"];window.location.pathname.indexOf("logout")!==-1&&(window.location.pathname="/"),"/cp/home/displaylogin"===window.location.pathname&&($("body").addClass("login"),$("body").css("background-image","url("+chrome.extension.getURL("img/portalbg/"+r[Math.floor(Math.random()*r.length)])+")"),$("#wrap").append('<div class="new-login"><form><img src="'+chrome.extension.getURL("img/myNEU.png")+'"><br><input name="neu-user" placeholder="Username" type="text"><br><input name="neu-pass" placeholder="Password" type="password"><br><button onclick="javascript:login();return true;" onload="clearCache()">Log in</button></form></div>'),$(".helplinks li").each(function(){$(this).html().indexOf("password.html")!==-1&&$(".new-login form").append($(this))}),$("input[name=neu-user]").focus(),$(".new-login").on("change",function(){var e=$("input[name=neu-user]").val(),i=$("input[name=neu-pass]").val();$("input[name=user]").val(e),$("input[name=pass]").val(i)}),$(".new-login").on("click",function(e){e.preventDefault()}),$(".new-login form button").on("click",function(e){$(this).html('<div class="spinner"><div class="rect1"></div>&nbsp;<div class="rect2"></div>&nbsp;<div class="rect3"></div>&nbsp;<div class="rect4"></div>&nbsp;<div class="rect5"></div></div>')}),$("#wrap").append('<div class="footer-links">'+$(".footerlinks").html()+"</div>")),$("#tabs_tda").each(function(){var i=$(this).html().replace(/<tbody>/g,"<div>"),a=e(i);$(this).html('<div class="nav">'+a+'</div><div class="credits">Made with <i class="fa fa-heart" aria-hidden="true"></i> by <a href="https://github.com/Abbondanzo/Modern-MyNEU">Peter Abbondanzo</a></div>')}),$(".bg1").closest("table").html('<div class="mylogo"><img src="'+chrome.extension.getURL("img/logo.png")+'"></div>'),$("#welcome").closest("table").each(function(){var i=$(this).html().replace(/<tbody>/g,"<div>").replace(/Welcome/g,"Signed in as").replace(/You are currently logged in./g,"").replace(/&nbsp;/g,""),a=e(i);$(this).html('<div class="heading">'+a+"</div>"),$(this).css("height","84px")}),$(".uportal-label").each(function(){$(this).html().indexOf("logout")!==-1?$(this).addClass("logout"):$(this).addClass("secondary")}),$("#welcome").parent().addClass("user"),$(".uportal-label").each(function(){var e=$(this).html();switch(e){case"mail":$(this).html('<i class="fa fa-envelope" aria-hidden="true"></i> '+e);break;case"my profile":$(this).html('<i class="fa fa-cog" aria-hidden="true"></i> '+e);break;case"NUPay":$(this).html('<i class="fa fa-shopping-basket" aria-hidden="true"></i> '+e);break;case"help":$(this).html('<i class="fa fa-question-circle" aria-hidden="true"></i> '+e),$(this).closest("ul").append('<li class="search"><input type="type" id="searchQuery" placeholder="Search"></input></li>');break;case"logout":$(this).html(e+' <i class="fa fa-sign-out" aria-hidden="true"></i>')}}),$(".nav div ul li").each(function(){var e=$(this).children().children().html(),i="fa-file-text",a={"myNEU Central":"fa-home","Self-Service":"fa-navicon",Community:"fa-users","Experiential Learning/Co-op":"fa-graduation-cap","Career Development":"fa-briefcase",InfoChannels:"fa-info-circle"};for(var t in a)e.indexOf(t)!==-1&&(i=a[t]);$(this).children().children().html('<i class="fa '+i+'" aria-hidden="true"></i> '+e)}),$(".border img").each(function(){var e=$(this).attr("title"),i=$(this).attr("src");e?e.indexOf("Expand")!==-1?$(this).parent().html('<i title="'+e+'" class="fa fa-expand" aria-hidden="true"></i>'):e.indexOf("Maximize")!==-1?$(this).parent().html('<i title="'+e+'" class="fa fa-caret-square-o-right" aria-hidden="true"></i>'):e.indexOf("Minimize")!==-1&&$(this).parent().html('<i title="'+e+'" class="fa fa-caret-square-o-down" aria-hidden="true"></i>'):i.indexOf("chan_remove_na")!==-1&&$(this).css("display","none")}),$("#searchQuery").on("keypress change keydown paste input",function(){var e=$(this).val().toLowerCase();$(".uportal-background-content td table").each(function(){var i=$(this).html().toLowerCase().replace(/<style(.|\s)*?style>/g,"").replace(/<script(.|\s)*?script>/g,"").replace(/<.*?>/g,"");i.indexOf(e)!==-1?$(this).css("display","table"):$(this).css("display","none")})});var c=1275;if(window.location.pathname.indexOf("render")!==-1){var d;$(window).on("resize",function(){clearTimeout(d),d=setTimeout(function(){a(),i()},50)}),$(document).ready(function(e){setTimeout(function(){a(),i()},50)})}$(".headerlinksdiv2 form").each(function(){var e=$(this).html();e.indexOf("Search")!==-1&&($(this).html(e.slice(7,-1)),$("input[type=text]").attr("placeholder","Search"))});var o=window.location.pathname;if(o.indexOf("udcprod8")!==-1){var h=$(".pagetitlediv").find("h2").html();$(".pagebodydiv").prepend("<h2>"+h+"</h2>"),$(".submenulinktext2").each(function(){var e=$(this).html();e.indexOf("RETURN TO MENU")!==-1?$(this).html('<i title="Return to Menu" class="fa fa-reply" aria-hidden="true"></i><span>'+e+"</span>"):e.indexOf("SITE MAP")!==-1?$(this).html('<i title="Site Map" class="fa fa-list" aria-hidden="true"></i><span>'+e+"</span>"):e.indexOf("HELP")!==-1&&$(this).html('<i title="Help" class="fa fa-life-ring" aria-hidden="true"></i><span>'+e+"</span>")}),"Student Detail Schedule"===h&&(s(),$(".more-details").on("click",function(){var e=$(this).closest(".schedule-item");e.hasClass("active-schedule")?(e.removeClass("active-schedule"),$(this).html("more...")):(e.addClass("active-schedule"),$(this).html("less..."))})),o.indexOf("NEUCLSS")!==-1&&($("body").css("background-image","none"),$(".pageheaderdiv1").css("margin-top",0)),o.indexOf("P_Regs")===-1&&o.indexOf("bwskfreg.P_AltPin")===-1||$(".datadisplaytable").each(function(){$(this).addClass("resize-table")})}$(".ddlabel").each(function(){var e=$(this).html();e.indexOf("TransferFrom")!==-1?($(this).attr("colspan","3"),$(this).next().css("border",0),$(this).next().attr("colspan","9")):e.indexOf("Academic Standing")!==-1&&$(this).next().css("border",0)}),$("select:not([multiple])").each(function(){var e=this;$(e).wrap('<div class="select"></div>');var i=e.options,a=$('<div class="current">'+i[i.selectedIndex].innerHTML.trim()+"</div>");$(e).before(a);for(var s='<div class="options">',n=0;n<i.length;n++)s+='<div class="option" data-value="'+i[n].value+'">'+i[n].innerHTML.trim()+"</div>";var l=$(s+"</div>");$(e).after(l),t(e,a),l.find(".option").click(function(i){i.stopPropagation(),a.html(this.innerHTML),e.value=$(this).data("value"),$(e).parent(".select").removeClass("active")})}),$("select[multiple]").each(function(){var e=this;$(e).wrap('<div class="select" style="width: 300px;"></div>');var i=e.options,a=$('<div class="current">'+i[0].innerHTML.trim()+"</div>");$(e).before(a);for(var s='<div class="options" style="width: 300px;">',n=$('<input type="text" placeholder="Search... (Coming soon!)" class="search" disabled>'),l=0;l<i.length;l++)s+='<div class="option'+(i[l].selected?" selected":"")+'" data-value="'+i[l].value+'">'+i[l].innerHTML.trim()+"</div>";var r=$(s+"</div>");r.prepend(n),$(e).after(r),t(e,a),n.click(function(e){e.stopPropagation()}),r.find(".option").click(function(i){i.stopPropagation();var t=$(e).val();t||(t=[]);var s=$(this).data("value").toString();if($(this).hasClass("selected"))t.splice(t.indexOf(s),1);else if("%"===s)r.find(".option.selected").removeClass("selected"),t=["%"];else{var n=t.indexOf("%");n!==-1&&(r.find('[data-value="%"].selected').removeClass("selected"),t.splice(n,1)),t.push(s)}switch($(this).toggleClass("selected"),$(e).val(t),t.length){case 0:a.html("Select an item");break;case 1:a.html(r.find('[data-value="'+t[0]+'"]').html());break;default:a.html(t.length+" items selected")}})}),$(document).click(function(){$(".select").removeClass("active")})}var style=document.createElement("link");style.rel="stylesheet",style.type="text/css",style.id="customcss",style.href=chrome.extension.getURL("themes/modern/custom.css");var defaultPage;chrome.storage.sync.get({enabled:"true",customColor:"ea1f23",defaultPage:"central"},function(e){JSON.parse(e.enabled)?(defaultPage=e.defaultPage,checkScript(),(document.head||document.documentElement).appendChild(style)):($('link[href*="custom.css"]').remove(),style.href=chrome.extension.getURL("css/default.css"),(document.head||document.documentElement).appendChild(style))});