var style=document.createElement("link");style.rel="stylesheet";style.type="text/css";style.id="customcss";style.href=chrome.extension.getURL("themes/modern/custom.css");chrome.storage.sync.get({enabled:"true",customColor:"ea1f23"},function(a){if(a.enabled=="false"){$("link[href*='custom.css']").remove();style.href=chrome.extension.getURL("css/default.css");(document.head||document.documentElement).appendChild(style)}else{(document.head||document.documentElement).appendChild(style);checkScript()}});function checkScript(){modernTheme()}function modernTheme(){var a=["bg1.jpg","bg2.jpg","bg3.jpg","bg4.jpg","bg5.jpg","bg6.jpg","bg7.jpg","bg8.jpg","bg9.jpg","bg10.jpg","bg11.jpg","bg12.jpg","bg13.jpg","bg14.jpg","bg15.jpg","bg16.jpg","bg17.jpg","bg18.jpg","bg19.jpg","bg20.jpg"];if(window.location.pathname.indexOf("logout")!=-1){window.location.pathname="/"}if(window.location.pathname=="/cp/home/displaylogin"){$("body").addClass("login");$("body").css("background-image","url("+chrome.extension.getURL("img/portalbg/"+a[Math.floor(Math.random()*a.length)])+")");$("#wrap").append('<div class="new-login"><form><img src="'+chrome.extension.getURL("img/myNEU.png")+'"><br><input name="neu-user" placeholder="Username" type="text"><br><input name="neu-pass" placeholder="Password" type="password"><br><button onclick="javascript:login();return true;" onload="clearCache()">Log in</button></form></div>');$(".helplinks li").each(function(){if($(this).html().indexOf("password.html")!=-1){$(".new-login form").append($(this))}});$("input[name=neu-user]").focus();$(".new-login").on("change",function(){var k=$("input[name=neu-user]").val();var l=$("input[name=neu-pass]").val();$("input[name=user]").val(k);$("input[name=pass]").val(l)});$(".new-login").on("click",function(k){k.preventDefault()});$(".new-login form button").on("click",function(k){$(this).html('<div class="spinner"><div class="rect1"></div>&nbsp;<div class="rect2"></div>&nbsp;<div class="rect3"></div>&nbsp;<div class="rect4"></div>&nbsp;<div class="rect5"></div></div>')});$("#wrap").append('<div class="footer-links">'+$(".footerlinks").html()+"</div>")}$("#tabs_tda").each(function(){var k=$(this).html().replace(/<tbody>/g,"<div>");var l=k.replace(/<\/tbody>/g,"</div>").replace(/<tr>/g,"<ul>").replace(/<\/tr>/g,"</ul>").replace(/<td>/g,"<li>").replace(/<\/td>/g,"</li>").replace(/<tr/g,"<ul").replace(/<td/g,"<li");$(this).html('<div class="nav">'+l+'</div><div class="credits">Made with <i class="fa fa-heart" aria-hidden="true"></i> by <a href="https://github.com/Abbondanzo/Modern-MyNEU">Peter Abbondanzo</a></div>')});$(".bg1").closest("table").html('<div class="mylogo"><img src="'+chrome.extension.getURL("img/logo.png")+'"></div>');$("#welcome").closest("table").each(function(){var k=$(this).html().replace(/<tbody>/g,"<div>").replace(/Welcome/g,"Signed in as").replace(/You are currently logged in./g,"").replace(/&nbsp;/g,"");var l=k.replace(/<\/tbody>/g,"</div>").replace(/<br>/g,"").replace(/<tr>/g,"<ul>").replace(/<\/tr>/g,"</ul>").replace(/<td>/g,"<li>").replace(/<\/td>/g,"</li>").replace(/<tr/g,"<ul").replace(/<td/g,"<li");$(this).html('<div class="heading">'+l+"</div>");$(this).css("height",84+"px")});$(".uportal-label").each(function(){if($(this).html().indexOf("logout")!=-1){$(this).addClass("logout")}else{$(this).addClass("secondary")}});$("#welcome").parent().addClass("user");$(".uportal-label").each(function(){var k=$(this).html();switch(k){case"mail":$(this).html('<i class="fa fa-envelope" aria-hidden="true"></i> '+k);break;case"my profile":$(this).html('<i class="fa fa-cog" aria-hidden="true"></i> '+k);break;case"NUPay":$(this).html('<i class="fa fa-shopping-basket" aria-hidden="true"></i> '+k);break;case"help":$(this).html('<i class="fa fa-question-circle" aria-hidden="true"></i> '+k);$(this).closest("ul").append('<li class="search"><input type="type" id="searchQuery" placeholder="Search"></input></li>');break;case"logout":$(this).html(k+' <i class="fa fa-sign-out" aria-hidden="true"></i>');break;default:break}});$(".nav div ul li").each(function(){var k=$(this).children().children().html();if(k.indexOf("myNEU Central")!=-1){$(this).children().children().html('<i class="fa fa-home" aria-hidden="true"></i> '+k)}else{if(k.indexOf("Self-Service")!=-1){$(this).children().children().html('<i class="fa fa-navicon" aria-hidden="true"></i> '+k)}else{if(k.indexOf("Community")!=-1){$(this).children().children().html('<i class="fa fa-users" aria-hidden="true"></i> '+k)}else{if(k.indexOf("Experiential Learning/Co-op")!=-1){$(this).children().children().html('<i class="fa fa-graduation-cap" aria-hidden="true"></i> '+k)}else{if(k.indexOf("Career Development")!=-1){$(this).children().children().html('<i class="fa fa-briefcase" aria-hidden="true"></i> '+k)}else{if(k.indexOf("InfoChannels")!=-1){$(this).children().children().html('<i class="fa fa-info-circle" aria-hidden="true"></i> '+k)}else{$(this).children().children().html('<i class="fa fa-file-text" aria-hidden="true"></i> '+k)}}}}}}});$(".border img").each(function(){var l=$(this).attr("title");var k=$(this).attr("src");if(l!=null){if(l.indexOf("Expand")!=-1){$(this).parent().html('<i title="'+l+'" class="fa fa-expand" aria-hidden="true"></i>')}else{if(l.indexOf("Maximize")!=-1){$(this).parent().html('<i title="'+l+'" class="fa fa-caret-square-o-right" aria-hidden="true"></i>')}else{if(l.indexOf("Minimize")!=-1){$(this).parent().html('<i title="'+l+'" class="fa fa-caret-square-o-down" aria-hidden="true"></i>')}}}}else{if(k.indexOf("chan_remove_na")!=-1){$(this).css("display","none")}}});$("#searchQuery").on("keypress change keydown paste input",function(){var k=$(this).val().toLowerCase();$(".uportal-background-content td table").each(function(){var l=$(this).html().toLowerCase().replace(/<style(.|\s)*?style>/g,"").replace(/<script(.|\s)*?script>/g,"").replace(/<.*?>/g,"");if(l.indexOf(k)!=-1){$(this).css("display","table")}else{$(this).css("display","none")}})});var d=1275;function c(){var k=$(".heading");if(k.height()<k.children().height()){$(".secondary").each(function(){$(this).addClass("sreduce");if($(window).width()>d){d=$(window).width()}if($(this).html().indexOf("Signed")!=-1){$(this).css("display","none")}})}else{if($(window).width()>d){$(".secondary").each(function(){$(this).removeClass("sreduce");if($(this).html().indexOf("Signed")!=-1){$(this).css("display","block")}})}}}function j(){var m=$(".nav").offset().top;var k=$(".nav").height();var l=$(".credits").offset().top;if(m+k+40>=l){$(".credits").css("opacity",0)}else{$(".credits").css("opacity",0.2)}}if(window.location.pathname.indexOf("render")!=-1){var i;$(window).on("resize",function(){clearTimeout(i);i=setTimeout(function(){j();c()},50)});$(document).ready(function(k){setTimeout(function(){j();c()},50)})}$(".headerlinksdiv2 form").each(function(){var k=$(this).html();if(k.indexOf("Search")!=-1){$(this).html(k.slice(7,-1));$("input[type=text]").attr("placeholder","Search")}});var g=window.location.pathname;if(g.indexOf("udcprod8")!=-1){var h=$(".pagetitlediv").find("h2").html();$(".pagebodydiv").prepend("<h2>"+h+"</h2>");$(".submenulinktext2").each(function(){var k=$(this).html();if(k.indexOf("RETURN TO MENU")!=-1){$(this).html('<i title="Return to Menu" class="fa fa-reply" aria-hidden="true"></i><span>'+k+"</span>")}else{if(k.indexOf("SITE MAP")!=-1){$(this).html('<i title="Site Map" class="fa fa-list" aria-hidden="true"></i><span>'+k+"</span>")}else{if(k.indexOf("HELP")!=-1){$(this).html('<i title="Help" class="fa fa-life-ring" aria-hidden="true"></i><span>'+k+"</span>")}}}});if(h=="Student Detail Schedule"){b();$(".more-details").on("click",function(){var k=$(this).closest(".schedule-item");if(k.hasClass("active-schedule")){k.removeClass("active-schedule");$(this).html("more...")}else{k.addClass("active-schedule");$(this).html("less...")}})}if(g.indexOf("NEUCLSS")!=-1){$("body").css("background-image","none");$(".pageheaderdiv1").css("margin-top",0)}}$(".ddlabel").each(function(){var k=$(this).html();if(k.indexOf("TransferFrom")!=-1){$(this).attr("colspan","3");$(this).next().css("border",0);$(this).next().attr("colspan","9")}else{if(k.indexOf("Academic Standing")!=-1){$(this).next().css("border",0)}}});$("select:not([multiple])").each(function(){var p=this;$(p).wrap('<div class="select"></div>');var o=p.options;var m=$('<div class="current">'+o[o.selectedIndex].innerHTML.trim()+"</div>");$(p).before(m);var n='<div class="options">';for(var l=0;l<o.length;l++){n+='<div class="option" data-value="'+o[l].value+'">'+o[l].innerHTML.trim()+"</div>"}var k=$(n+"</div>");$(p).after(k);m.click(function(r){r.stopPropagation();var q=$(p).parent(".select");q.toggleClass("active");$(".select").not(q).removeClass("active")});k.find(".option").click(function(q){q.stopPropagation();m.html(this.innerHTML);p.value=$(this).data("value");$(p).parent(".select").removeClass("active")})});$("select[multiple]").each(function(){var q=this;$(q).wrap('<div class="select" style="width: 300px;"></div>');var o=q.options;var m=$('<div class="current">'+o[0].innerHTML.trim()+"</div>");$(q).before(m);var n='<div class="options" style="width: 300px;">';var p=$('<input type="text" placeholder="Search... (Coming soon!)" class="search" disabled>');for(var l=0;l<o.length;l++){n+='<div class="option'+(o[l].selected?" selected":"")+'" data-value="'+o[l].value+'">'+o[l].innerHTML.trim()+"</div>"}var k=$(n+"</div>");k.prepend(p);$(q).after(k);m.click(function(s){s.stopPropagation();var r=$(q).parent(".select");r.toggleClass("active");$(".select").not(r).removeClass("active")});p.click(function(r){r.stopPropagation()});k.find(".option").click(function(u){u.stopPropagation();var s=$(q).val();if(!s){s=[]}var t=$(this).data("value").toString();if($(this).hasClass("selected")){s.splice(s.indexOf(t),1)}else{if(t==="%"){k.find(".option.selected").removeClass("selected");s=["%"]}else{var r=s.indexOf("%");if(r!==-1){k.find('[data-value="%"].selected').removeClass("selected");s.splice(r,1)}s.push(t)}}$(this).toggleClass("selected");$(q).val(s);switch(s.length){case 0:m.html("Select an item");break;case 1:m.html(k.find('[data-value="'+s[0]+'"]').html());break;default:m.html(s.length+" items selected");break}})});$(document).click(function(){$(".select").removeClass("active")});function b(){var k="This layout table is used to present the schedule course detail";$('.datadisplaytable[summary="'+k+'"]').each(function(){$(this).css("display","none");var E=$(this).find("tbody").children().eq(0).children("td").html();var q=$(this).find("tbody").children().eq(1).children("td").html();var F=$(this).find("tbody").children().eq(2).children("td").html();var M=$(this).find("tbody").children().eq(4).children("td").html();var x=$(this).find("tbody").children().eq(5).children("td").html();var m=$(this).find("tbody").children().eq(6).children("td").html();var B=$(this).find("tbody").children().eq(7).children("td").html();var L=$(this).next()[0];$(L).css("display","none");var t=$(L).find("tbody").children().eq(1).children().eq(1).html();var s=$(L).find("tbody").children().eq(1).children().eq(2).html();var l=$(L).find("tbody").children().eq(1).children().eq(3).html();var A=$(L).find("tbody").children().eq(1).children().eq(4).html();var r=$(L).find("tbody").children().eq(1).children().eq(6).html();var G=$(L).find("tbody").children().eq(1).children().eq(7).html();var z='<div class="schedule-item">';z+='<div class="building-image" style="background-image: url('+chrome.extension.getURL(f(l))+')">';var o=$(this).find("caption").html();var y=o.match(/- ([A-Z]{2,4} \d{4}) -/)[1];var v=o.match(/^.*?(?= -)/g);z+='<div class="building-left"><h3>'+y+"</h3><h1>"+v+"</h1></div>";var J=0;var n="";while(J<=s.length){switch(s.slice(J,J+1)){case"M":n+="Mon, ";break;case"T":n+="Tue, ";break;case"W":n+="Wed, ";break;case"R":n+="Thur, ";break;case"F":n+="Fri, ";break;case"S":n+="Sat, ";break;default:n+="";break}J++}if(n.length>0){n=n.slice(0,n.length-2)}var C=$(L).find("tbody").children().eq(2);var K;var w;if(C.length){var p=C.children().eq(1).html();var I=C.children().eq(4).html();K=C.children().eq(3).html();w='<span class="finals">Final on '+I.match(/^.*?(?= -)/g)+" at<br>"+p+"</span>"}else{w="No Final";K="No Final"}r=r.split(", ");var u;if(r.length>1){var H=1;var D="";while(H<r.length){D+="<span>"+e(r[H])+"</span>";H++}u=e(r[0])+', <div class="hiddenprof">+'+(r.length-1)+'<div class="otherprof">'+D+"</div></div>"}else{u=e(r[0])}z+='<div class="building-right"><h3>'+n+'</h3><h3><i class="fa fa-clock-o" aria-hidden="true"></i> '+t+"</h3></div>";z+="</div>";z+='<div class="schedule-details">';z+='<div class="details-left"><span><i class="fa fa-map-marker" aria-hidden="true"></i> '+l+'</span><span><i class="fa fa-user" aria-hidden="true"></i> '+u+"</span></div>";z+='<div class="details-center"><span><i class="fa fa-dot-circle-o" aria-hidden="true"></i> '+x+' Credits</span><span><i class="fa fa-calendar" aria-hidden="true"></i> '+w+"</span></div>";z+='<div class="details-right"><span><i>CRN:</i> '+q+'</span><span><a class="more-details">more...</a></span></div>';z+="</div>";z+='<div class="schedule-extras"><div class="extras-left">';z+="<p>Range <span>"+A+"</span></p>";z+="<p>Term <span>"+E+"</span></p>";z+="<p>Campus <span>"+B+"</span></p>";z+="<p>Status <span>"+F+"</span></p>";z+='</div><div class="extras-right">';z+="<p>Final Location <span>"+K+"</span></p>";z+="<p>Grade Mode <span>"+M+"</span></p>";z+="<p>Level <span>"+m+"</span></p>";z+="<p>Remaining Seats <span>"+G+"</span></p>";z+="</div></div></div>";$(this).after(z)})}function f(k){if(k.indexOf("Behrakis")!=-1){return"img/buildings/behrakis.jpg"}else{if(k.indexOf("West Village H")!=-1){return"img/buildings/wvh.jpg"}else{if(k.indexOf("West Village G")!=-1){return"img/buildings/wvg.jpg"}else{if(k.indexOf("West Village F")!=-1){return"img/buildings/wvf.jpg"}else{if(k.indexOf("International Village")!=-1){return"img/buildings/iv.jpg"}else{if(k.indexOf("Ryder")!=-1){return"img/buildings/ryder.jpg"}else{if(k.indexOf("Forsyth")!=-1){return"img/buildings/forsyth.jpg"}else{if(k.indexOf("Richards")!=-1){return"img/buildings/richards.jpg"}else{if(k.indexOf("Ell")!=-1){return"img/buildings/ell.jpg"}else{if(k.indexOf("Dodge")!=-1){return"img/buildings/dodge.jpg"}else{if(k.indexOf("Hayden")!=-1){return"img/buildings/hayden.jpg"}else{if(k.indexOf("Hurtig")!=-1){return"img/buildings/hurtig.jpg"}else{if(k.indexOf("Mugar")!=-1){return"img/buildings/mugar.jpg"}else{if(k.indexOf("Robinson")!=-1){return"img/buildings/robinson.jpg"}else{if(k.indexOf("Snell Library")!=-1){return"img/buildings/library.jpg"}else{if(k.indexOf("Lake")!=-1){return"img/buildings/lake.jpg"}else{if(k.indexOf("Kariotis")!=-1){return"img/buildings/kariotis.jpg"}else{return"img/buildings/campus.jpg"}}}}}}}}}}}}}}}}}}function e(k){var l=k.match(/<a href(.|\s)*?>/);if(l){return l[0]+k.match(/(.*?)<a href/)[1]+"</a>"}else{return k}}};